{% extends 'base.html' %}
{% block title %}{{ race.name }}{% endblock %}

{% block content %}

<div class="race-hero mb-5">
    {% if race.circuit_image %}
        <img src="{{ race.circuit_image.url }}" alt="{{ race.name }}">
    {% endif %}

    <div class="race-hero-overlay">
        <h1>{{ race.name }}</h1>
        <p>{{ race.location }} ‚Ä¢ {{ race.race_date }}</p>
    </div>
</div>

<h3 class="mb-4">üéüÔ∏è Available Tickets</h3>

<div class="row">
    {% for ticket in tickets %}
    <div class="col-md-4 mb-4">
        <div class="card p-4 h-100 f1-card">

            <h5 class="mb-2">{{ ticket.category }}</h5>
            <h4 class="text-danger mb-3">‚Çπ{{ ticket.price }}</h4>

            <!-- üéØ Ticket Features -->
            <ul class="list-unstyled small mb-3">
                {% if ticket.category == "General" %}
                    <li>‚úî Access to general stands</li>
                    <li>‚úî Race day entry</li>
                    <li>‚úî Giant screen viewing</li>
                    <li>‚úî Food & beverage stalls</li>

                {% elif ticket.category == "Grandstand" %}
                    <li>‚úî Reserved grandstand seating</li>
                    <li>‚úî Clear track-side views</li>
                    <li>‚úî Covered seating</li>
                    <li>‚úî Access to fan zones</li>

                {% elif ticket.category == "VIP" %}
                    <li>‚≠ê Premium pit-lane views</li>
                    <li>‚≠ê Paddock club access</li>
                    <li>‚≠ê Complimentary food & drinks</li>
                    <li>‚≠ê VIP lounge & hospitality</li>
                {% endif %}
            </ul>

            <!-- Seat status -->
            {% if ticket.seats_left > 0 %}
                <p class="text-success mb-3">
                    {{ ticket.seats_left }} seats left
                </p>
                <a href="{% url 'book_ticket' ticket.id %}" class="btn btn-f1 w-100">
                    Book Now
                </a>
            {% else %}
                <p class="text-danger mb-3">Sold Out</p>
                <button class="btn btn-secondary w-100" disabled>
                    Unavailable
                </button>
            {% endif %}

        </div>
    </div>
    {% endfor %}
</div>


{% endblock %}
